<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Animator Pro - Home</title>
<style>
body{margin:0;font-family:"Segoe UI","Noto Sans JP",sans-serif;display:flex;height:100vh;background:#f5f7fa;}
.sidebar{width:240px;background:#0078d7;color:#fff;padding:20px;display:flex;flex-direction:column;}
.sidebar button{margin:6px 0;padding:10px;border:none;border-radius:8px;background:#fff;color:#0078d7;font-weight:bold;cursor:pointer;}
.main{flex:1;padding:20px;overflow:auto;}
.project{background:#fff;padding:16px;border-radius:12px;margin:10px 0;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.project input{font-size:1em;border:none;background:transparent;width:60%;}
</style>
</head>
<body>
<div class="sidebar">
  <h2>ğŸ¬ Animator Pro</h2>
  <button onclick="newProject()">ï¼‹ æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</button>
  <button onclick="location.href='backup.html'">ğŸ’¾ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</button>
  <button onclick="logout()">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
</div>
<div class="main" id="projectList"></div>

<script>
let user = localStorage.getItem("currentUser") || "default";
let projects = JSON.parse(localStorage.getItem(user+"_projects")||"[]");

function saveProjects(){localStorage.setItem(user+"_projects",JSON.stringify(projects));}
function renderProjects(){
  let list=document.getElementById("projectList");
  list.innerHTML="";
  projects.forEach((p,i)=>{
    let div=document.createElement("div");
    div.className="project";
    div.innerHTML=`
      <input value="${p.name}" onchange="renameProject(${i},this.value)">
      <button onclick="openProject(${i})">é–‹ã</button>
      <button onclick="deleteProject(${i})">ğŸ—‘ï¸</button>
    `;
    list.appendChild(div);
  });
}
function newProject(){
  let name="æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ";
  let count=1;
  while(projects.some(p=>p.name===name)) name=`æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ(${count++})`;
  projects.push({name,frames:[]});
  saveProjects();
  renderProjects();
}
function renameProject(i,newName){
  projects[i].name=newName;
  saveProjects();
}
function openProject(i){
  localStorage.setItem(user+"_currentProject",JSON.stringify(projects[i]));
  location.href="project.html";
}
function deleteProject(i){
  if(confirm("å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){projects.splice(i,1);saveProjects();renderProjects();}
}
function logout(){location.href="index.html";}
renderProjects();
</script>
</body>
</html>
